{% extends "layout.html" %}

{% block content %}
<div class="row marketing">
    <form role="form" method="post" action="{{ app.request.baseUrl }}/checklists/create" class="col-lg-12 form-horizontal no-padding">
        <div class="form-group">
            <label for="checklist-name" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-10">
                <input type="text" name="checklist[name]" class="form-control" id="checklist-name" placeholder="Name">
            </div>
        </div>

        <div class="form-group step-input">
            <label class="col-sm-2 control-label">Steps</label>
            <div class="col-sm-10">
                <input type="text" name="checklist[steps][]" class="form-control" placeholder="Step description (press enter to create new)">
            </div>
        </div>

        <div class="form-group no-margin">
            <button type="submit" class="btn btn-success pull-right" href="#" role="button">Create</button>
        </div>
    </form>
</div>
{% endblock content %}

{% block scripts %}
<script type="text/template" id="step-input-template">
<div class="form-group step-input">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
        <input type="text" name="checklist[steps][]" class="form-control" placeholder="Step description (press enter to create new)">
    </div>
</div>
</script>

<script type="text/javascript">
$(document).ready(function() {
    $(document).on('keydown', '.step-input:last input', function(event) {
        if (event.which == 13) {
            event.preventDefault();
            createNewStepInput();
        }
    });
});

function createNewStepInput() {
    var html = $('#step-input-template').html(),
        input = $(html);

    $('.step-input:last').after(input);
    $('.step-input:last input').focus();
}
</script>
{% endblock scripts %}
